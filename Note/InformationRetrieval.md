==参考文献==

- [1] 走进搜索引擎 - 梁斌
- [2] [全文检索引擎solr系列](http://www.importnew.com/12707.html)
- [3] [whoosh doc](https://whoosh.readthedocs.io/en/latest/)
- [4][solr doc](https://lucene.apache.org/solr/guide/)
### 全文检索原理
- 倒排索引：关键字到文档的映射
- 索引创建：
    - Tokenizer 分词组件，将文档分成一个一个单独的词，去标点停用词。
    - Token to Linguistic Processor。Lowercase，stemming（缩减），lemmatization（转变）
    - 正排 DocId -> WordId -> Freq
    - 倒排表 Term|DocFreq -> DocID|Freq -> DocID|Freq。   DocFreq文档频次，表示多少文档出现过此词，Frequency，词频，表示某个文档中该词的出现的次数。

- 搜索步骤：
    - 对query进行处理（布尔语法）
    - 搜索索引，得到符合语法树的文档集合
    - 根据查询相关性，对结果排序
    -


### 走进搜索引擎读书笔记
#### 第五章 搜索引擎的索引系统
- 索引文件，倒排表是存放在内存中能够追加倒排记录的倒排索引。临时倒排文件是指存放在磁盘中，以文件的形式存储的不能够追加倒排索引。最终倒排文件以文件的形式存储的临时倒排文件归并得到的倒排索引。
- 文档编号，每个文档赋予一个唯一的编号。url可以唯一表示。
- 正排索引 DocId->WordId->NHits(某个索引词在文档中的频次)->HitLists(某个索引词在文档中出现的位置)
- Zip法则：第k个经常出现的词，词频与1/k成比例。eg,词频排名第10的词汇，在书中出现了2653次，排名和出现次数的乘积为26530.排名为20的词汇，在书中出现了1311次。排名和出现次数的乘积为26220.非常相似。
- 布尔检索模型下的索引规模估计。一个词频排序为i的词汇，他的实际词频大约是
```math
\frac{1}{13}i
```
- 这里的词频排序可认为是海量数据中的排序，对于搜索引擎来说，一个词汇的词频是它在全部网页中出现的实际次数除以全部网页实际出现的词汇数目。
根据zip法则，高频索引词几乎出现在所有的文档中，第二级高频索引词出现在大约一半的文档中，1MB的文档大约需要1GB的索引。

-


#### 第六章 搜索引擎的查询系统
- 信息熵，变量的不确定性越大，信息熵月大，将其搞清楚所需要的信息量也就越大 -plogp
- 布尔模型， AND OR NOT等逻辑运算符。检索速度快，易于实现，没有考虑文档和查询词的相关性，没有区分查询词的权重问题。不足：如果一个查询词没有被包含则检索失败。检索结果很难进行排序。
- 向量空间模型：将查询词a和文档b向量化后计算余弦值。
- 关键词权重的量化方法TFIDF。
- 分词->倒排表检索->文档列表获取(交集?)->向量化|TFIDF权重|BM25F->排序
- 多文档列表求交集计算。每个查询词对应一个文档列表，多个查询词对应多文档列表。求交集的话，查询返回的结果文档中包含了全部查询词（or？）最佳归并树算法：每次对现存的两个最短的文档列表进行归并
-




#### solr 学习
- solr高扩展。solr query是简单的HTTP请求URLs，响应是结构化的文档主要是json。